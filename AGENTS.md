# CLAUDE.md

–≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è Claude Code –∏–ª–∏ CODEX –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –∫–æ–¥–æ–º –≤ —ç—Ç–æ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.

**–£ –∫–æ–¥–∞ —Å—Ç–∞–≤—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏, –Ω–æ –Ω–µ–±–æ–ª—å—à–∏–µ –∏ –Ω–µ —Ç–∞–∫ –º–Ω–æ–≥–æ**

## –í–ê–ñ–ù–û: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ù–ê–î–û –ü–ï–†–ò–û–î–ò–ß–ï–°–ö–ò –û–ë–ù–û–í–õ–Ø–¢–¨ –ò –î–û–ë–ê–í–õ–Ø–¢–¨ –ò–ù–§–û–†–ú–ê–¶–ò–Æ –í –≠–¢–û–¢ –§–ê–ô–õ –ò –°–õ–ï–î–ò–¢–¨ –ó–ê –¢–ï–ú, –ß–¢–û–ë–´ –ò–ù–§–û–†–ú–ê–¶–ò–Ø –ù–ï –ü–†–û–¢–ò–í–û–†–ï–ß–ò–õ–ê –†–ï–ê–õ–¨–ù–û–°–¢–ò –ò –ü–†–û–ß–ò–ú –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø–ú**

**–í—Å–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã—Ö –≤–µ—Ä—Å–∏–π**

## –û–±–∑–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞

**Avito Parser** - —Å–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ 24/7, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –Ω–∞ Avito –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ Telegram. –ó–∞–¥–∞—á–∞: –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –ø–æ—è–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –∫—Ä–∏—Ç–µ—Ä–∏—è–º (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ä–µ–≥–∏–æ–Ω, –±—Ä–µ–Ω–¥, –º–æ–¥–µ–ª—å) –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ —É–≤–µ–¥–æ–º–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Telegram. –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã: 24/7, —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.

## üéØ –§–ò–õ–û–°–û–§–ò–Ø –ü–†–û–ï–ö–¢–ê: KISS

**Keep It Simple, Stupid** - –í–°–ï –î–û–õ–ñ–ù–û –ë–´–¢–¨ –ü–†–û–°–¢–´–ú, –ë–ï–ó –õ–ò–®–ù–ï–ì–û.

- –ù–ï–¢ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
- –ù–ï–¢ —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
- –ü—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω—ã–π, –ø–æ–Ω—è—Ç–Ω—ã–π –∫–æ–¥
- –û–¥–Ω–∞ –∑–∞–¥–∞—á–∞ = –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è

---

## ‚õî –ö–ê–¢–ï–ì–û–†–ò–ß–ï–°–ö–ò–ï –ó–ê–ü–†–ï–¢–´

### 1. –ü–ê–†–°–ò–ù–ì - –¢–û–õ–¨–ö–û –ö–ê–¢–ê–õ–û–ì

**–ó–ê–ü–†–ï–©–ï–ù–û:**
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `parse_card` –∏–∑ avito-library
- ‚ùå –î–µ–ª–∞—Ç—å `page.goto()` –Ω–∞ URL –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- ‚ùå –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –≤ –∫–∞—Ä—Ç–æ—á–∫–∏ —Ç–æ–≤–∞—Ä–æ–≤
- ‚ùå –°–æ–±–∏—Ä–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞—Ä—Ç–æ—á–µ–∫

**–†–ê–ó–†–ï–®–ï–ù–û:**
- ‚úÖ –¢–æ–ª—å–∫–æ `parse_catalog` –Ω–∞ 1-–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- ‚úÖ –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ –∏–∑ –∫–∞—Ç–∞–ª–æ–≥–∞
- ‚úÖ URL –∫–∞—Ä—Ç–æ—á–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ `https://www.avito.ru/{item_id}`

### 2. –ë–ê–ó–ê –î–ê–ù–ù–´–• - –ù–ò–ö–ê–ö–ò–• ORM

**–ó–ê–ü–†–ï–©–ï–ù–û:**
- ‚ùå SQLAlchemy
- ‚ùå Tortoise ORM
- ‚ùå Peewee
- ‚ùå –õ—é–±—ã–µ ORM

**–†–ê–ó–†–ï–®–ï–ù–û:**
- ‚úÖ –¢–æ–ª—å–∫–æ asyncpg —Å —á–∏—Å—Ç—ã–º–∏ SQL –∑–∞–ø—Ä–æ—Å–∞–º–∏
- ‚úÖ –ü—Ä—è–º—ã–µ INSERT, UPDATE, SELECT

### 3. –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø - –¢–û–õ–¨–ö–û DOCKER-COMPOSE

**–ó–ê–ü–†–ï–©–ï–ù–û:**
- ‚ùå –°–æ–∑–¥–∞–≤–∞—Ç—å config.py —Å –∫–ª–∞—Å—Å–∞–º–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .env —Ñ–∞–π–ª—ã
- ‚ùå –•—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö

**–†–ê–ó–†–ï–®–ï–ù–û:**
- ‚úÖ –í–°–ï –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ docker-compose.yml –≤ —Å–µ–∫—Ü–∏–∏ environment
- ‚úÖ –ß—Ç–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `os.getenv()` –≤ –∫–æ–¥–µ
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–µ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### 4. –ë–†–ê–£–ó–ï–† - –û–î–ù–ê –°–¢–†–ê–ù–ò–¶–ê –ù–ê –í–û–†–ö–ï–†–ê

**–ó–ê–ü–†–ï–©–ï–ù–û:**
- ‚ùå –°–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—É—é page –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏
- ‚ùå –ó–∞–∫—Ä—ã–≤–∞—Ç—å –∏ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –±—Ä–∞—É–∑–µ—Ä –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å headless=True

**–†–ê–ó–†–ï–®–ï–ù–û:**
- ‚úÖ –û–¥–Ω–∞ –¥–æ–ª–≥–æ–ª–∏–≤—É—â–∞—è page –Ω–∞ –≤–æ—Ä–∫–µ—Ä–∞
- ‚úÖ –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏
- ‚úÖ –¢–æ–ª—å–∫–æ chromium, —Ç–æ–ª—å–∫–æ headless=False —Å Xvfb

### 5. –ë–õ–û–ö–õ–ò–°–¢–´ - –¢–û–õ–¨–ö–û –ü–û–°–õ–ï TELEGRAM

**–ó–ê–ü–†–ï–©–ï–ù–û:**
- ‚ùå –î–æ–±–∞–≤–ª—è—Ç—å item_id –≤ –±–ª–æ–∫–ª–∏—Å—Ç –î–û –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
- ‚ùå –î–æ–±–∞–≤–ª—è—Ç—å –≤ –±–ª–æ–∫–ª–∏—Å—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ Telegram

**–†–ê–ó–†–ï–®–ï–ù–û:**
- ‚úÖ –î–æ–±–∞–≤–ª—è—Ç—å –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram
- ‚úÖ –ï—Å–ª–∏ Telegram —É–ø–∞–ª - item_id –ù–ï –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è (–≥–∞—Ä–∞–Ω—Ç–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏)

---

## ‚úÖ –ì–õ–ê–í–ù–´–ï –ü–†–ò–ù–¶–ò–ü–´

### 1. –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

```
15 asyncio –≤–æ—Ä–∫–µ—Ä–æ–≤ ‚Üí 1 –ø—Ä–æ—Ü–µ—Å—Å Python ‚Üí asyncio.gather()
15 Xvfb –¥–∏—Å–ø–ª–µ–µ–≤ ‚Üí DISPLAY :1 –¥–æ :15
1 –±—Ä–∞—É–∑–µ—Ä chromium –Ω–∞ –≤–æ—Ä–∫–µ—Ä–∞ ‚Üí 1 –¥–æ–ª–≥–æ–ª–∏–≤—É—â–∞—è page
```

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å.

### 2. –ñ–ò–ó–ù–ï–ù–ù–´–ô –¶–ò–ö–õ –ó–ê–î–ê–ß - –¶–ò–†–ö–£–õ–Ø–†–ù–´–ô

```
pending ‚Üí in_progress ‚Üí completed ‚Üí (1 —Å–µ–∫) ‚Üí pending ‚Üí ...
```

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –Ω–æ–≤—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞.

### 3. –î–ê–ù–ù–´–ï - –û–î–ù–û –ú–ï–°–¢–û –•–†–ê–ù–ï–ù–ò–Ø

- **groups.json** - –≥—Ä—É–ø–ø—ã –ø–∞—Ä—Å–∏–Ω–≥–∞
- **sellers_blocklist.txt** - –±–ª–æ–∫–ª–∏—Å—Ç –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
- **PostgreSQL** - –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω–æ–µ (–∑–∞–¥–∞—á–∏, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã, –±–ª–æ–∫–ª–∏—Å—Ç—ã)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, –æ–¥–∏–Ω –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–∞–≤–¥—ã.

### 4. –û–ë–†–ê–ë–û–¢–ö–ê –û–®–ò–ë–û–ö - RETRY –° –£–ú–û–ú

```python
–ö–∞–ø—á–∞ –Ω–µ —Ä–µ—à–∏–ª–∞—Å—å (10 –ø–æ–ø—ã—Ç–æ–∫) ‚Üí —Å–º–µ–Ω–∞ –ø—Ä–æ–∫—Å–∏ ‚Üí retry
403/407 –ø—Ä–æ–∫—Å–∏ ‚Üí –±–∞–Ω –Ω–∞–≤—Å–µ–≥–¥–∞ ‚Üí —Å–º–µ–Ω–∞ ‚Üí retry
429 (rate limit) ‚Üí –ù–ï –±–∞–Ω ‚Üí —Å–º–µ–Ω–∞ ‚Üí retry
Telegram —É–ø–∞–ª ‚Üí retry –¥–æ 5 –ø–æ–ø—ã—Ç–æ–∫
NOT_DETECTED ‚Üí retry –¥–æ 5 –ø–æ–ø—ã—Ç–æ–∫ ‚Üí failed
```

**–ü—Ä–∏–Ω—Ü–∏–ø:** –ù–µ –ø–∞–Ω–∏–∫–æ–≤–∞—Ç—å, –ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞, –∑–Ω–∞—Ç—å –∫–æ–≥–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è.

### 5. –ó–ê–í–ò–°–®–ò–ï –†–ï–°–£–†–°–´ - –ê–í–¢–û–û–ß–ò–°–¢–ö–ê

```
–ó–∞–¥–∞—á–∏ locked_at > 10 –º–∏–Ω—É—Ç ‚Üí –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ
–ü—Ä–æ–∫—Å–∏ locked_at > 30 –º–∏–Ω—É—Ç ‚Üí –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ
–í–æ—Ä–∫–µ—Ä —É–ø–∞–ª ‚Üí release_worker_resources(worker_id)
```

**–ü—Ä–∏–Ω—Ü–∏–ø:** –°–∞–º–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑ —Ä—É—á–Ω–æ–≥–æ –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–∞.

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –ü–†–ê–í–ò–õ–ê

### Playwright

1. –¢–æ–ª—å–∫–æ async API
2. –¢–æ–ª—å–∫–æ chromium
3. headless=False + Xvfb –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
4. –û–¥–∏–Ω –±—Ä–∞—É–∑–µ—Ä = –æ–¥–∏–Ω DISPLAY (:1, :2, ..., :15)

### –î–µ—Ç–µ–∫—Ç–æ—Ä—ã avito-library

**–ü–æ—Å–ª–µ –ö–ê–ñ–î–û–ì–û page.goto() –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:**

```python
resp = await page.goto(url, wait_until="domcontentloaded")
state = await detect_page_state(page, last_response=resp)
```

**–î–µ–π—Å—Ç–≤–∏—è –°–¢–†–û–ì–û –ø–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –¥–µ—Ç–µ–∫—Ç–æ—Ä–∞:**

- `CATALOG_DETECTOR_ID` ‚Üí parse_catalog
- `CAPTCHA_DETECTOR_ID` –∏–ª–∏ `CONTINUE_BUTTON_DETECTOR_ID` –∏–ª–∏ `PROXY_BLOCK_429_DETECTOR_ID` ‚Üí resolve_captcha_flow
- `PROXY_BLOCK_403_DETECTOR_ID` ‚Üí ban_proxy + —Å–º–µ–Ω–∞
- `NOT_DETECTED_STATE_ID` ‚Üí retry (–¥–æ 5 –ø–æ–ø—ã—Ç–æ–∫)

### parse_catalog

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã (–§–ò–ö–°–ò–†–û–í–ê–ù–ù–´–ï):**

```python
fields = ["item_id", "title", "price", "currency", "seller_name", "location", "published"]
max_pages = 1
sort_by_date = True
include_html = False
start_page = 1
```

**–ü—Ä–∏–Ω—Ü–∏–ø:** –¢–æ–ª—å–∫–æ —Å–≤–µ–∂–∏–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –¥–∞—Ç–µ.

### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è listings

**–í —Ç–∞–∫–æ–º –ø–æ—Ä—è–¥–∫–µ:**

1. `"—Å–µ–≥–æ–¥–Ω—è" in listing.published.lower()` –ò–õ–ò `listing.published is None/empty`
2. `listing.seller_name NOT IN blocklist_sellers` (–≥–ª–æ–±–∞–ª—å–Ω—ã–π)
3. `listing.item_id NOT IN blocklist_items` (–µ—Å–ª–∏ blocklist_mode='global' ‚Üí —Ç–æ–ª—å–∫–æ global, –µ—Å–ª–∏ 'local' ‚Üí —Ç–æ–ª—å–∫–æ local)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –¢–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è, —Ç–æ–ª—å–∫–æ –æ—Ç –Ω–µ–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤.

---

## üìã –ò–ù–í–ê–†–ò–ê–ù–¢–´ (–ù–ï–ò–ó–ú–ï–ù–Ø–ï–ú–´–ï –ü–†–ê–í–ò–õ–ê)

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 1: URL –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä

```
https://www.avito.ru/{region_slug}/{category_path}?cd=1&radius=0&searchRadius=0&localPriority=0&s=104[&q=...]
```

- –ï—Å–ª–∏ `all_russia=true` ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `/all` –≤–º–µ—Å—Ç–æ `region_slug`
- –ï—Å–ª–∏ `enrich_q=true` ‚Üí –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Ä–æ–¥–æ–≤–æ–µ —Å–ª–æ–≤–æ –í –ö–û–ù–ï–¶ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ q
- –ü–∞—Ä–∞–º–µ—Ç—Ä `q` –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å (–≤—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è)

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 2: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á

```python
brands=[audi, bmw], models={audi: [a6, q7], bmw: [x5]}
‚Üí 5 –∑–∞–¥–∞—á:
  - q=audi
  - q=audi a6
  - q=audi q7
  - q=bmw
  - q=bmw x5

brands=[], models={}
‚Üí 1 –∑–∞–¥–∞—á–∞ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ q (–≤—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è)

models={audi: []}
‚Üí 1 –∑–∞–¥–∞—á–∞ q=audi (–ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ ‚â† –ø—Ä–æ–ø—É—Å–∫ –±—Ä–µ–Ω–¥–∞)
```

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 3: Telegram —Ñ–æ—Ä–º–∞—Ç

```
{title}
{price} {currency}
{location}
https://www.avito.ru/{item_id}
```

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 4: –ë–ª–æ–∫–ª–∏—Å—Ç—ã

**–î–æ–±–∞–≤–ª–µ–Ω–∏–µ (–í–°–ï–ì–î–ê –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram):**
- –û–±—ä—è–≤–ª–µ–Ω–∏—è: –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –û–î–ù–û–í–†–ï–ú–ï–ù–ù–û –≤ blocklist_items_global –ò blocklist_items_local
- –ü—Ä–æ–¥–∞–≤—Ü—ã: –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ blocklist_sellers (–≥–ª–æ–±–∞–ª—å–Ω–æ)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç blocklist_mode –≥—Ä—É–ø–ø—ã):**
- –ï—Å–ª–∏ blocklist_mode='global': –ø—Ä–æ–≤–µ—Ä—è–µ–º –¢–û–õ–¨–ö–û blocklist_items_global
- –ï—Å–ª–∏ blocklist_mode='local': –ø—Ä–æ–≤–µ—Ä—è–µ–º –¢–û–õ–¨–ö–û blocklist_items_local –¥–ª—è —ç—Ç–æ–π –≥—Ä—É–ø–ø—ã
- –ü—Ä–æ–¥–∞–≤—Ü—ã: –í–°–ï–ì–î–ê –ø—Ä–æ–≤–µ—Ä—è–µ–º blocklist_sellers (–≤—Å–µ –≥—Ä—É–ø–ø—ã)

**–ü—Ä–∏–Ω—Ü–∏–ø:** –í—Å–µ –≤–∏–¥—è—Ç –≤—Å–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è (—á–µ—Ä–µ–∑ global), –Ω–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –≥—Ä—É–ø–ø—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ (—á–µ—Ä–µ–∑ local —Ñ–∏–ª—å—Ç—Ä).

### –ò–Ω–≤–∞—Ä–∏–∞–Ω—Ç 5: –ü—Ä–æ–∫—Å–∏ –ø–æ–ª–∏—Ç–∏–∫–∞

```
403/407 ‚Üí is_banned=True –Ω–∞–≤—Å–µ–≥–¥–∞
429 ‚Üí –ù–ï –±–∞–Ω, —Å–º–µ–Ω–∞ –ø—Ä–æ–∫—Å–∏
–ö–∞–ø—á–∞ –Ω–µ —Ä–µ—à–∏–ª–∞—Å—å (10 –ø–æ–ø—ã—Ç–æ–∫) ‚Üí —Å–º–µ–Ω–∞ –ø—Ä–æ–∫—Å–∏
–ù–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏ ‚Üí –∂–¥–∞—Ç—å, –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å
```

---

## –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –í—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
main.py ‚Üí –û—Ä–∫–µ—Å—Ç—Ä–∏—Ä—É–µ—Ç 10-15 async –≤–æ—Ä–∫–µ—Ä–æ–≤ + —Ñ–æ–Ω–æ–≤–∞—è –æ—á–∏—Å—Ç–∫–∞
  ‚îî‚îÄ> worker.py ‚Üí –ö–∞–∂–¥—ã–π –≤–æ—Ä–∫–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ–¥–Ω–∏–º –±—Ä–∞—É–∑–µ—Ä–æ–º Playwright + –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á
      ‚îú‚îÄ> db.py ‚Üí –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î (—á–∏—Å—Ç—ã–π SQL —á–µ—Ä–µ–∑ asyncpg)
      ‚îî‚îÄ> telegram_notifier.py ‚Üí –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**–ì–ª–∞–≤–Ω–∞—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è ([container/main.py](container/main.py))**
- –ó–∞–ø—É—Å–∫–∞–µ—Ç N async –≤–æ—Ä–∫–µ—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10) —á–µ—Ä–µ–∑ `asyncio.gather()`
- –í—ã–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ–Ω–æ–≤—É—é –∑–∞–¥–∞—á—É –æ—á–∏—Å—Ç–∫–∏ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç graceful shutdown –ø–æ —Å–∏–≥–Ω–∞–ª–∞–º SIGTERM/SIGINT
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î —Å –ª–æ–≥–∏–∫–æ–π retry –∏ exponential backoff

**–õ–æ–≥–∏–∫–∞ –≤–æ—Ä–∫–µ—Ä–∞ ([container/worker.py](container/worker.py))**
- –ö–∞–∂–¥—ã–π –≤–æ—Ä–∫–µ—Ä —É–ø—Ä–∞–≤–ª—è–µ—Ç –û–î–ù–ò–ú –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–º –±—Ä–∞—É–∑–µ—Ä–∞ Playwright
- –ö–∞–∂–¥—ã–π –±—Ä–∞—É–∑–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –û–î–ò–ù –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –¥–∏—Å–ø–ª–µ–π Xvfb (`:1` –¥–æ `:15`)
- –¶–∏–∫–ª –∑–∞–¥–∞—á: –≤–∑—è—Ç—å pending –∑–∞–¥–∞—á—É ‚Üí –Ω–∞–≤–∏–≥–∞—Ü–∏—è ‚Üí –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚Üí –ø–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–∞–ª–æ–≥–∞ ‚Üí —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ ‚Üí –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫: retry —Å–æ —Å–º–µ–Ω–æ–π –ø—Ä–æ–∫—Å–∏, –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞ –ø—Ä–∏ —Å–±–æ—è—Ö

**–°–ª–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö ([container/db.py](container/db.py))**
- –ß–∏—Å—Ç—ã–π asyncpg —Å raw SQL –∑–∞–ø—Ä–æ—Å–∞–º–∏ (–ë–ï–ó ORM)
- –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `FOR UPDATE SKIP LOCKED` –¥–ª—è –∑–∞–¥–∞—á –∏ –ø—Ä–æ–∫—Å–∏
- Connection pool –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≤–æ—Ä–∫–µ—Ä–æ–≤

**Telegram —É–≤–µ–¥–æ–º–∏—Ç–µ–ª—å ([container/telegram_notifier.py](container/telegram_notifier.py))**
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–∏–º chat ID –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å —É—Å–ø–µ—Ö–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è
- –û–±—ä—è–≤–ª–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –±–ª–æ–∫–ª–∏—Å—Ç –¢–û–õ–¨–ö–û –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
1. –í–æ—Ä–∫–µ—Ä –∑–∞–±–∏—Ä–∞–µ—Ç pending –∑–∞–¥–∞—á—É –∏–∑ –ë–î (–∞—Ç–æ–º–∞—Ä–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
2. –í–æ—Ä–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–±–æ–¥–Ω—ã–π –ø—Ä–æ–∫—Å–∏ (–∞—Ç–æ–º–∞—Ä–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞)
3. –ë—Ä–∞—É–∑–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ URL –∫–∞—Ç–∞–ª–æ–≥–∞ Avito
4. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–∫–∞—Ç–∞–ª–æ–≥, –∫–∞–ø—á–∞, –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –∏ —Ç.–¥.)
5. –ü–∞—Ä—Å–∏–Ω–≥ –∫–∞—Ç–∞–ª–æ–≥–∞ (—Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –¥–∞—Ç–µ)
6. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –æ–±—ä—è–≤–ª–µ–Ω–∏–π: —Ç–æ–ª—å–∫–æ —Å–µ–≥–æ–¥–Ω—è ‚Üí –±–ª–æ–∫–ª–∏—Å—Ç—ã
7. –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram ‚Üí –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –±–ª–æ–∫–ª–∏—Å—Ç –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
8. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ ‚Üí –°–±—Ä–æ—Å –≤ pending —á–µ—Ä–µ–∑ 1 —Å–µ–∫ (—Ü–∏—Ä–∫—É–ª—è—Ä–Ω—ã–π —Ä–µ–∂–∏–º)
```

## –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–º. [scripts/init_db.sql](scripts/init_db.sql) –¥–ª—è –ø–æ–ª–Ω–æ–π —Å—Ö–µ–º—ã. –ö–ª—é—á–µ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

- **groups** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≥—Ä—É–ø–ø –ø–∞—Ä—Å–∏–Ω–≥–∞ (–∫–∞—Ç–µ–≥–æ—Ä–∏—è, —Ä–µ–≥–∏–æ–Ω, –±—Ä–µ–Ω–¥—ã, –º–æ–¥–µ–ª–∏, telegram_chat_ids)
- **tasks** - –¶–∏—Ä–∫—É–ª—è—Ä–Ω—ã–µ –∑–∞–¥–∞—á–∏ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å—Ç–∞—Ç—É—Å–∞ (pending/in_progress/completed/failed)
- **parsed_items** - –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π
- **blocklist_items_global** - –ì–ª–æ–±–∞–ª—å–Ω—ã–π –±–ª–æ–∫–ª–∏—Å—Ç (–≤—Å–µ –≥—Ä—É–ø–ø—ã)
- **blocklist_items_local** - –ë–ª–æ–∫–ª–∏—Å—Ç –ø–æ –≥—Ä—É–ø–ø–∞–º
- **blocklist_sellers** - –ì–ª–æ–±–∞–ª—å–Ω—ã–π –±–ª–æ–∫–ª–∏—Å—Ç –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
- **proxies** - –ü—É–ª –ø—Ä–æ–∫—Å–∏ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –±–∞–Ω–æ–≤ –∏ –∞—Ç–æ–º–∞—Ä–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose
cd container
docker-compose up --build

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
docker-compose down

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```bash
# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ö–µ–º—ã –ë–î
psql -h <host> -p <port> -U <user> -d <database> -f scripts/init_db.sql

# –ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä—É–ø–ø –∏–∑ JSON
python scripts/load_groups.py

# –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–∫—Å–∏ –∏–∑ —Ñ–∞–π–ª–∞
python scripts/load_proxies.py

# –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã
python scripts/delete_group.py <group_name>

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–ª–∏—Å—Ç–∞–º–∏
python scripts/manage_blocklist.py
```

### –£—Ç–∏–ª–∏—Ç—ã

```bash
# –ü–æ–ª—É—á–µ–Ω–∏–µ Telegram chat ID –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
python scripts/get_chat_id.py

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—è URL
python scripts/url_builder.py
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (docker-compose.yml)

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ:
- `POSTGRES_HOST`, `POSTGRES_PORT`, `POSTGRES_DB`, `POSTGRES_USER`, `POSTGRES_PASSWORD`
- `TELEGRAM_BOT_TOKEN`

–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ (—Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):
- `WORKER_COUNT` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
- `MAX_TASK_ATTEMPTS` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 20)
- `TASK_LOCK_TIMEOUT_MINUTES` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
- `PROXY_LOCK_TIMEOUT_MINUTES` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 30)
- `CAPTCHA_MAX_ATTEMPTS` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø (scripts/data/groups.json)

–ö–∞–∂–¥–∞—è –≥—Ä—É–ø–ø–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç:
- `category`: slug –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ Avito (–Ω–∞–ø—Ä–∏–º–µ—Ä, "avtomobili", "katera_i_yahty")
- `region_slug`: –†–µ–≥–∏–æ–Ω –∏–ª–∏ "all" –¥–ª—è –≤—Å–µ–π –†–æ—Å—Å–∏–∏
- `brands`: –ú–∞—Å—Å–∏–≤ –Ω–∞–∑–≤–∞–Ω–∏–π –±—Ä–µ–Ω–¥–æ–≤ –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- `models`: –û–±—ä–µ–∫—Ç —Å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –±—Ä–µ–Ω–¥–æ–≤ –Ω–∞ –º–∞—Å—Å–∏–≤—ã –º–æ–¥–µ–ª–µ–π (–ø—É—Å—Ç–æ –¥–ª—è –≤—Å–µ—Ö –º–æ–¥–µ–ª–µ–π)
- `blocklist_mode`: "global" –∏–ª–∏ "local"
- `telegram_chat_ids`: –ú–∞—Å—Å–∏–≤ ID —á–∞—Ç–æ–≤ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π –≤ Telegram
- `all_russia`: Boolean –¥–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –≤—Å–µ–π —Å—Ç—Ä–∞–Ω–µ
- `enrich_q`: Boolean –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–û—Å–Ω–æ–≤–Ω—ã–µ:**
- Python 3.11
- asyncpg - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥—Ä–∞–π–≤–µ—Ä PostgreSQL
- playwright - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –±—Ä–∞—É–∑–µ—Ä–∞
- aiogram - Telegram bot API
- avito-library - –ü–∞—Ä—Å–∏–Ω–≥ –∏ –¥–µ—Ç–µ–∫—Ü–∏—è –¥–ª—è Avito (GitHub)

**–°–∏—Å—Ç–µ–º–Ω—ã–µ (Docker):**
- Xvfb - –í–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ X –¥–∏—Å–ø–ª–µ–∏ –¥–ª—è headless –±—Ä–∞—É–∑–µ—Ä–∞
- supervisor - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏
- tini - Init —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ zombie –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
container/
  ‚îú‚îÄ‚îÄ main.py              # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–æ—Ä–∫–µ—Ä–∞–º–∏
  ‚îú‚îÄ‚îÄ worker.py            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—Ä–∞—É–∑–µ—Ä–æ–º
  ‚îú‚îÄ‚îÄ db.py                # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î (—á–∏—Å—Ç—ã–π SQL)
  ‚îú‚îÄ‚îÄ telegram_notifier.py # Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  ‚îú‚îÄ‚îÄ Dockerfile           # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–±—Ä–∞–∑–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  ‚îú‚îÄ‚îÄ docker-compose.yml   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–∞
  ‚îú‚îÄ‚îÄ supervisord.conf     # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è supervisor
  ‚îî‚îÄ‚îÄ start_xvfb*.sh       # –°–∫—Ä–∏–ø—Ç—ã –∑–∞–ø—É—Å–∫–∞ Xvfb

scripts/
  ‚îú‚îÄ‚îÄ init_db.sql          # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  ‚îú‚îÄ‚îÄ load_groups.py       # –ó–∞–≥—Ä—É–∑–∫–∞ –≥—Ä—É–ø–ø –∏–∑ JSON
  ‚îú‚îÄ‚îÄ load_proxies.py      # –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–∫—Å–∏ –∏–∑ —Ñ–∞–π–ª–∞
  ‚îú‚îÄ‚îÄ delete_group.py      # –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä—É–ø–ø—ã
  ‚îú‚îÄ‚îÄ manage_blocklist.py  # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–ª–æ–∫–ª–∏—Å—Ç–∞–º–∏
  ‚îú‚îÄ‚îÄ url_builder.py       # –£—Ç–∏–ª–∏—Ç—ã –∫–æ–Ω—Å—Ç—Ä—É–∏—Ä–æ–≤–∞–Ω–∏—è URL
  ‚îî‚îÄ‚îÄ data/
      ‚îú‚îÄ‚îÄ groups.json      # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –≥—Ä—É–ø–ø
      ‚îú‚îÄ‚îÄ proxies.txt      # –°–ø–∏—Å–æ–∫ –ø—Ä–æ–∫—Å–∏ (IP:PORT:USER:PASS)
      ‚îî‚îÄ‚îÄ sellers_blocklist.txt  # –ì–ª–æ–±–∞–ª—å–Ω—ã–π –±–ª–æ–∫–ª–∏—Å—Ç –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
```

## –ó–∞–º–µ—Ç–∫–∏ –ø–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

- –í–µ—Å—å –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–∞—Ç—Ç–µ—Ä–Ω—ã async/await (–Ω–∏–∫–∞–∫–∏—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –≤—ã–∑–æ–≤–æ–≤)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ –≤ main.py, –≤—Å–µ –º–æ–¥—É–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `logging.getLogger(__name__)`
- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –∫–æ–¥–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–ø–æ —Å—Ç–∏–ª—é –ø—Ä–æ–µ–∫—Ç–∞)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –≤–µ—Ä—Å–∏–∏ –≤—Å–µ—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫
- –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ—Å–ª–µ 5 –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Å–±–æ–µ–≤ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É—Ç–µ—á–µ–∫ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞—á –ø–æ `successful_parses ASC` –¥–ª—è —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –º–µ–∂–¥—É –≥—Ä—É–ø–ø–∞–º–∏

---

**KISS. Always.**
